{% load static wagtailimages_tags %}

<div class="main_posts_grid">
    {% for post in posts %}
        {% with post=post.specific %}
            {% with post.get_parent.specific as category %}
            <a href="{{ post.url }}" class="main_grid_single"
                 onmouseenter="changeBackground(this, '{{ category.main_color|safe }}')"
                 onmouseleave="resetBackground(this)">
                <div class="grid_img_container">
                    {% image post.post_image fill-310x200 as postImage %}
                    <img src="{{ postImage.url }}"/>
                </div>
                <div class="main_grid_single_info">
                    <span style="color:{{ category.main_color }}">{{ category.title }}</span>
                    <p>{{ post.title }}</p>
                </div>
            </a>
            {% endwith %}
        {% endwith %}
    {% endfor %}
</div>
